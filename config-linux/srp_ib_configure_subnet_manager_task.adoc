---
permalink: config-linux/srp_ib_configure_subnet_manager_task.html
sidebar: sidebar
keywords: infiniband, switch, run, subnet, manager, path, loss, high, load, avoid, path, loss, configure, opensm
summary: Using an InfiniBand switch to run subnet manager might cause unexpected path loss during high loads. To avoid path loss, configure the subnet manager on one or more of your hosts using opensm.
---
= Configure subnet manager
:icons: font
:imagesdir: ../media/

[.lead]
Using an InfiniBand switch to run subnet manager might cause unexpected path loss during high loads. To avoid path loss, configure the subnet manager on one or more of your hosts using opensm.

===== Steps

. Install the opensm package on any hosts that will be running the subnet manager.
. Start and enable the opensm service.
. Use the ``ibstat -p``command to find `GUID0` and `GUID1` of the HBA ports. For example:
+
----
# ibstat -p
 0x248a070300a80a80
 0x248a070300a80a81
----

. Start two instances of the subnet manager, one for each subnet, by adding the following commands to `/etc/rc.d/after.local` for SUSE or `etc/rc.d/rc.local` for Redhat. Substitute the values you found in the last step for `GUID0` and `GUID1`. For `P0` and `P1`, use the subnet manager priorities, with 1 being the lowest and 15 the highest:
+
----
 opensm -B -g GUID0 -p P0 -f /var/log/opensm-ib0.log
 opensm -B -g GUID1 -p P1 -f /var/log/opensm-ib1.log
----
